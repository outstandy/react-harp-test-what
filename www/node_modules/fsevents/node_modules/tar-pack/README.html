<!DOCTYPE html><html><title>Hometown</title><link rel="stylesheet" href="/scss/main.css"><script src="https://fb.me/react-0.14.7.js"></script><script src="https://fb.me/react-dom-0.14.7.js"></script><script src="https://npmcdn.com/babel-core@5.8.38/browser.min.js"></script><script src="https://npmcdn.com/jquery@3.1.0/dist/jquery.min.js"></script><script src="https://npmcdn.com/remarkable@1.6.2/dist/remarkable.min.js"></script><body><nav><div class="grid"><div class="row"><div class="grid-1-1"><a href="#" class="titling type-300 pink">Hometown</a></div></div></div></nav><h1>Tar Pack</h1><p>Package and un-package modules of some sort (in tar/gz bundles).  This is mostly useful for package managers.  Note that it doesn&#39;t check for or touch <code>package.json</code> so it can be used even if that&#39;s not the way you store your package info.</p>
<p><a href="https://travis-ci.org/ForbesLindesay/tar-pack"><img src="https://img.shields.io/travis/ForbesLindesay/tar-pack/master.svg" alt="Build Status"></a>
<a href="https://david-dm.org/ForbesLindesay/tar-pack"><img src="https://img.shields.io/david/ForbesLindesay/tar-pack.svg" alt="Dependency Status"></a>
<a href="https://www.npmjs.com/package/tar-pack"><img src="https://img.shields.io/npm/v/tar-pack.svg" alt="NPM version"></a></p>
<h2>Installation</h2><pre><code>$ npm install tar-pack
</code></pre><h2>API</h2><h3>pack(folder|packer, [options])</h3><p>Pack the folder at <code>folder</code> into a gzipped tarball and return the tgz as a stream.  Files ignored by <code>.gitignore</code> will not be in the package.</p>
<p>You can optionally pass a <code>fstream.DirReader</code> directly, instead of folder.  For example, to create an npm package, do:</p>
<pre><code class="language-js">pack(require(&quot;fstream-npm&quot;)(folder), [options])
</code></pre>
<p>Options:</p>
<ul>
<li><code>noProprietary</code> (defaults to <code>false</code>) Set this to <code>true</code> to prevent any proprietary attributes being added to the tarball.  These attributes are allowed by the spec, but may trip up some poorly written tarball parsers.</li>
<li><code>ignoreFiles</code> (defaults to <code>[&#39;.gitignore&#39;]</code>) These files can specify files to be excluded from the package using the syntax of <code>.gitignore</code>.  This option is ignored if you parse a <code>fstream.DirReader</code> instead of a string for folder.</li>
<li><code>filter</code> (defaults to <code>entry =&gt; true</code>) A function that takes an entry and returns <code>true</code> if it should be included in the package and <code>false</code> if it should not.  Entryies are of the form <code>{path, basename, dirname, type}</code> where (type is &quot;Directory&quot; or &quot;File&quot;).  This function is ignored if you parse a <code>fstream.DirReader</code> instead of a string for folder.</li>
</ul>
<p>Example:</p>
<pre><code class="language-js">var write = require(&#39;fs&#39;).createWriteStream
var pack = require(&#39;tar-pack&#39;).pack
pack(process.cwd())
  .pipe(write(__dirname + &#39;/package.tar.gz&#39;))
  .on(&#39;error&#39;, function (err) {
    console.error(err.stack)
  })
  .on(&#39;close&#39;, function () {
    console.log(&#39;done&#39;)
  })
</code></pre>
<h3>unpack(folder, [options,] cb)</h3><p>Return a stream that unpacks a tarball into a folder at <code>folder</code>.  N.B. the output folder will be removed first if it already exists.</p>
<p>The callback is called with an optional error and, as its second argument, a string which is one of:</p>
<ul>
<li><code>&#39;directory&#39;</code>, indicating that the extracted package was a directory (either <code>.tar.gz</code> or <code>.tar</code>)</li>
<li><code>&#39;file&#39;</code>, incating that the extracted package was just a single file (extracted to <code>defaultName</code>, see options)</li>
</ul>
<p>Basic Options:</p>
<ul>
<li><code>defaultName</code> (defaults to <code>index.js</code>) If the package is a single file, rather than a tarball, it will be &quot;extracted&quot; to this file name, set to <code>false</code> to disable.</li>
</ul>
<p>Advanced Options (you probably don&#39;t need any of these):</p>
<ul>
<li><code>gid</code> - (defaults to <code>null</code>) the <code>gid</code> to use when writing files</li>
<li><code>uid</code> - (defaults to <code>null</code>) the <code>uid</code> to use when writing files</li>
<li><code>dmode</code> - (defaults to <code>0777</code>) The mode to use when creating directories</li>
<li><code>fmode</code> - (defaults to <code>0666</code>) The mode to use when creating files</li>
<li><code>unsafe</code> - (defaults to <code>false</code>) (on non win32 OSes it overrides <code>gid</code> and <code>uid</code> with the current processes IDs)</li>
</ul>
<p>Example:</p>
<pre><code class="language-js">var read = require(&#39;fs&#39;).createReadStream
var unpack = require(&#39;tar-pack&#39;).unpack
read(process.cwd() + &#39;/package.tar.gz&#39;)
  .pipe(unpack(__dirname + &#39;/package/&#39;, function (err) {
    if (err) console.error(err.stack)
    else console.log(&#39;done&#39;)
  }))
</code></pre>
<h2>License</h2><p>  BSD</p><footer><div class="grid"><div class="row"><div class="grid-1-1"><p class="text off-white">This the footer</p></div></div></div></footer><script src="bundle.js"></script></body></html>