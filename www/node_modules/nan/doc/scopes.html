<!DOCTYPE html><html><title>Hometown</title><link rel="stylesheet" href="/scss/main.css"><script src="https://fb.me/react-0.14.7.js"></script><script src="https://fb.me/react-dom-0.14.7.js"></script><script src="https://npmcdn.com/babel-core@5.8.38/browser.min.js"></script><script src="https://npmcdn.com/jquery@3.1.0/dist/jquery.min.js"></script><script src="https://npmcdn.com/remarkable@1.6.2/dist/remarkable.min.js"></script><body><nav><div class="grid"><div class="row"><div class="grid-1-1"><a href="#" class="titling type-300 pink">Hometown</a></div></div></div></nav><h2>Scopes</h2><p>A <em>local handle</em> is a pointer to an object. All V8 objects are accessed using handles, they are necessary because of the way the V8 garbage collector works.</p>
<p>A handle scope can be thought of as a container for any number of handles. When you&#39;ve finished with your handles, instead of deleting each one individually you can simply delete their scope.</p>
<p>The creation of <code>HandleScope</code> objects is different across the supported versions of V8. Therefore, NAN provides its own implementations that can be used safely across these.</p>
<ul>
<li><a href="#api_nan_handle_scope"><b><code>Nan::HandleScope</code></b></a></li>
<li><a href="#api_nan_escapable_handle_scope"><b><code>Nan::EscapableHandleScope</code></b></a></li>
</ul>
<p>Also see the V8 Embedders Guide section on <a href="https://developers.google.com/v8/embed#handles">Handles and Garbage Collection</a>.</p>
<p><a name="api_nan_handle_scope"></a></p>
<h3>Nan::HandleScope</h3><p>A simple wrapper around <a href="https://v8docs.nodesource.com/io.js-3.0/d3/d95/classv8_1_1_handle_scope.html"><code>v8::HandleScope</code></a>.</p>
<p>Definition:</p>
<pre><code class="language-c++">class Nan::HandleScope {
 public:
  Nan::HandleScope();
  static int NumberOfHandles();
};
</code></pre>
<p>Allocate a new <code>Nan::HandleScope</code> whenever you are creating new V8 JavaScript objects. Note that an implicit <code>HandleScope</code> is created for you on JavaScript-accessible methods so you do not need to insert one yourself.</p>
<p>Example:</p>
<pre><code class="language-c++">// new object is created, it needs a new scope:
void Pointless() {
  Nan::HandleScope scope;
  v8::Local&lt;v8::Object&gt; obj = Nan::New&lt;v8::Object&gt;();
}

// JavaScript-accessible method already has a HandleScope
NAN_METHOD(Pointless2) {
  v8::Local&lt;v8::Object&gt; obj = Nan::New&lt;v8::Object&gt;();
}
</code></pre>
<p><a name="api_nan_escapable_handle_scope"></a></p>
<h3>Nan::EscapableHandleScope</h3><p>Similar to <a href="#api_nan_handle_scope"><code>Nan::HandleScope</code></a> but should be used in cases where a function needs to return a V8 JavaScript type that has been created within it.</p>
<p>Definition:</p>
<pre><code class="language-c++">class Nan::EscapableHandleScope {
 public:
  Nan::EscapableHandleScope();
  static int NumberOfHandles();
  template&lt;typename T&gt; v8::Local&lt;T&gt; Escape(v8::Local&lt;T&gt; value);
}
</code></pre>
<p>Use <code>Escape(value)</code> to return the object.</p>
<p>Example:</p>
<pre><code class="language-c++">v8::Local&lt;v8::Object&gt; EmptyObj() {
  Nan::EscapableHandleScope scope;
  v8::Local&lt;v8::Object&gt; obj = Nan::New&lt;v8::Object&gt;();
  return scope.Escape(obj);
}
</code></pre><footer><div class="grid"><div class="row"><div class="grid-1-1"><p class="text off-white">This the footer</p></div></div></div></footer><script src="bundle.js"></script></body></html>