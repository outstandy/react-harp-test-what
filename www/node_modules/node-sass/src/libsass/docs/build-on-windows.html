<!DOCTYPE html><html><title>Hometown</title><link rel="stylesheet" href="/scss/main.css"><script src="https://fb.me/react-0.14.7.js"></script><script src="https://fb.me/react-dom-0.14.7.js"></script><script src="https://npmcdn.com/babel-core@5.8.38/browser.min.js"></script><script src="https://npmcdn.com/jquery@3.1.0/dist/jquery.min.js"></script><script src="https://npmcdn.com/remarkable@1.6.2/dist/remarkable.min.js"></script><body><nav><div class="grid"><div class="row"><div class="grid-1-1"><a href="#" class="titling type-300 pink">Hometown</a></div></div></div></nav><p>We support builds via MingGW and via Visual Studio Community 2013.
Both should be considered experimental (MinGW was better tested)!</p>
<h2>Building via MingGW (makefiles)</h2><p>First grab the latest <a href="http://sourceforge.net/projects/mingw/files/latest/download?source=files">MinGW for windows</a> installer. Once it is installed, you can click on continue or open the Installation Manager via <code>bin\mingw-get.exe</code>.</p>
<p>You need to have the following components installed:
<img src="https://cloud.githubusercontent.com/assets/282293/5525466/947bf396-89e6-11e4-841d-4aa916f14de1.png" alt="Visualization of components installed in the interface"></p>
<p>Next we need to install <a href="https://msysgit.github.io/">git for windows</a>. You probably want to check the option to add it to the global path, but you do not need to install the unix tools.</p>
<p>If you want to run the spec test-suite you also need <a href="http://rubyinstaller.org/">ruby</a> and a few gems available. Grab the <a href="http://rubyinstaller.org/">latest installer</a> and make sure to add it the global path. Then install the missing gems:</p>
<pre><code class="language-bash">gem install minitest
</code></pre>
<h3>Mount the mingw root directory</h3><p>As mentioned in the <a href="http://www.mingw.org/wiki/Getting_Started#toc5">MinGW Getting Started</a> guide, you should edit <code>C:\MinGW\msys\1.0\etc\fstab</code> to contain the following line:</p>
<pre><code>C:\MinGW   /mingw
</code></pre><h3>Starting a &quot;MingGW&quot; console</h3><p>Create a batch file with this content:</p>
<pre><code class="language-bat">@echo off
set PATH=C:\MinGW\bin;%PATH%
REM only needed if not already available
set PATH=%PROGRAMFILES%\git\bin;%PATH%
REM C:\MinGW\msys\1.0\msys.bat
cmd
</code></pre>
<p>Execute it and make sure these commands can be called: <code>git</code>, <code>mingw32-make</code>, <code>rm</code> and <code>gcc</code>! Once this is all set, you should be ready to compile <code>libsass</code>!</p>
<h3>Get the sources</h3><pre><code class="language-bash"># using git is preferred
git clone https://github.com/sass/libsass.git
# only needed for sassc and/or testsuite
git clone https://github.com/sass/sassc.git libsass/sassc
git clone https://github.com/sass/sass-spec.git libsass/sass-spec
</code></pre>
<h3>Decide for static or shared library</h3><p><code>libsass</code> can be built and linked as a <code>static</code> or as a <code>shared</code> library. The default is <code>static</code>. To change it you can set the <code>BUILD</code> environment variable:</p>
<pre><code class="language-bat">set BUILD=&quot;shared&quot;
</code></pre>
<h3>Compile the library</h3><pre><code class="language-bash">mingw32-make -C libsass
</code></pre>
<h3>Results can be found in</h3><pre><code class="language-bash">$ ls libsass/lib
libsass.a  libsass.dll  libsass.so
</code></pre>
<h3>Run the spec test-suite</h3><pre><code class="language-bash">mingw32-make -C libsass test_build
</code></pre>
<h2>Building via MingGW 64bit (makefiles)</h2><p>Building libass to dll on window 64bit.</p>
<ul>
<li><p>downloads  <a href="http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/mingw-builds/4.9.2/threads-win32/seh/x86_64-4.9.2-release-win32-seh-rt_v3-rev0.7z/download">MinGW64 for windows7 64bit</a> , and unzip to &quot;C:\mingw64&quot;.</p>
</li>
<li><p>Create a batch file with this content:</p>
</li>
</ul>
<pre><code class="language-bat">@echo off
set PATH=C:\mingw64\bin;%PATH%
set CC=gcc
REM only needed if not already available
set PATH=%PROGRAMFILES%\Git\bin;%PATH%
REM C:\MinGW\msys\1.0\msys.bat
cmd
</code></pre>
<ul>
<li>By default , mingw64 dll will depends on &quot;​m​i​n​g​w​m​1​0​.​d​l​l​、​ ​l​i​b​g​c​c​<em>​s​</em>​d​w​2​-​1​.​d​l​l​&quot; , we can modify Makefile to fix this:(add &quot;-static&quot;)</li>
</ul>
<pre><code class="language-bash">lib/libsass.dll: $(COBJECTS) $(OBJECTS) $(RCOBJECTS)
    $(MKDIR) lib
    $(CXX) -shared $(LDFLAGS) -o $@ $(COBJECTS) $(OBJECTS) $(RCOBJECTS) $(LDLIBS) -s -static -Wl,--subsystem,windows,--out-implib,lib/libsass.a
</code></pre>
<ul>
<li>Compile the library</li>
</ul>
<pre><code class="language-bash">mingw32-make -C libsass
</code></pre>
<p>By the way , if you are using java jna , <a href="http://jnaerator.googlecode.com/">JNAerator</a> is a good tool.</p>
<h2>Building via Visual Studio Community 2013</h2><p>Open a Visual Studio 2013 command prompt:</p>
<ul>
<li><code>VS2013 x86 Native Tools Command Prompt</code></li>
</ul>
<p>Note: When I installed the community edition, I only got the 2012 command prompts. I copied them from the Startmenu to the Desktop and adjusted the paths from <code>Visual Studio 11.0</code> to <code>Visual Studio 12.0</code>. Since <code>libsass</code> uses some <code>C++11</code> features, you need at least a MSVC 2013 compiler (v120).</p>
<h3>Get the source</h3><pre><code class="language-bash"># using git is preferred
git clone https://github.com/sass/libsass.git
git clone https://github.com/sass/sassc.git libsass/sassc
# only needed if you want to run the testsuite
git clone https://github.com/sass/sass-spec.git libsass/sass-spec
</code></pre>
<h3>Compile sassc</h3><p>Sometimes <code>msbuild</code> seems not available from the command prompt. Just search for it and add it to the global path. It seems to be included in the .net folders too.</p>
<pre><code class="language-bat">cd libsass
REM set PATH=%PATH%;%PROGRAMFILES%\MSBuild\12.0\Bin
msbuild /m:4 /p:Configuration=Release win\libsass.sln
REM running the spec test-suite manually (needs ruby and minitest gem)
ruby sass-spec\sass-spec.rb -V 3.4 -c win\bin\sassc.exe -s --impl libsass sass-spec/spec
cd ..
</code></pre><footer><div class="grid"><div class="row"><div class="grid-1-1"><p class="text off-white">This the footer</p></div></div></div></footer><script src="bundle.js"></script></body></html>